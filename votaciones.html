<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Sistema de Votaciones</title>
  <style>
    /* Variables CSS para facilitar ajustes */
    :root {
      --color-fondo-menu: #1e204a;
      --color-texto-menu: #f7c948;
      --color-fondo-body: #121526;
      --color-boton: #f7c948;
      --color-boton-hover: #d6a92c;
    }

    /* Reset y estilos generales */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--color-fondo-body);
      color: var(--color-texto-menu);
      margin: 0;
      padding: 20px;
      transition: padding-left 0.3s ease;
    }

    /* Menú lateral plegable */
    #sidebar {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 0;
      background-color: var(--color-fondo-menu);
      overflow-x: hidden;
      transition: width 0.3s ease;
      padding-top: 60px;
      box-sizing: border-box;
      z-index: 10000;
    }
    #sidebar.open {
      width: 250px;
    }
    #sidebar ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    #sidebar ul li {
      padding: 15px 20px;
      border-bottom: 1px solid #162144;
      cursor: pointer;
      user-select: none;
    }
    #sidebar ul li:hover {
      background-color: #273063;
    }

    /* Botón para abrir/cerrar menú */
    #menu-toggle {
      position: fixed;
      top: 15px;
      left: 15px;
      background-color: var(--color-boton);
      border: none;
      border-radius: 4px;
      padding: 10px 15px;
      font-weight: bold;
      color: var(--color-fondo-body);
      cursor: pointer;
      z-index: 11000;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    #menu-toggle:hover {
      background-color: var(--color-boton-hover);
    }

    /* Ajuste del body cuando el menú está abierto */
    body.menu-open {
      padding-left: 250px;
    }

    /* Contenedor sumador de votos */
    #sumador-votos {
      max-width: 400px;
      background: var(--color-fondo-menu);
      margin: 40px auto 60px auto;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px #d6a92c99;
      color: var(--color-texto-menu);
      text-align: center;
    }
    #sumador-votos h3 {
      margin-bottom: 15px;
    }
    .input-voto {
      width: 60px;
      margin: 10px 10px 10px 0;
      padding: 8px;
      border-radius: 6px;
      border: none;
      font-size: 16px;
      text-align: center;
      background: #162144;
      color: var(--color-texto-menu);
      transition: background-color 0.3s ease;
    }
    .input-voto:focus {
      outline: 2px solid var(--color-boton);
      background: #1f2766;
    }
    .input-voto[readonly] {
      background: #273063;
      font-weight: bold;
      cursor: default;
    }

    /* Estilos originales - sin cambios */
    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: var(--color-boton);
      text-shadow: 1px 1px 5px #d6a92c;
    }

    .form-container {
      max-width: 700px;
      margin: 0 auto 40px auto;
      background: var(--color-fondo-menu);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 10px #d6a92c44;
    }

    .form-container label {
      display: block;
      margin: 12px 0 5px;
      font-weight: 600;
    }

    .form-container input[type="text"] {
      width: 100%;
      padding: 10px;
      border-radius: 6px;
      border: none;
      font-size: 16px;
    }

    .form-container .candidatos-inputs {
      margin-top: 15px;
    }

    .candidato-row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .candidato-row input {
      flex: 1;
      padding: 8px;
      border-radius: 6px;
      border: none;
      font-size: 14px;
    }

    button {
      margin-top: 15px;
      padding: 12px 20px;
      background-color: var(--color-boton);
      color: var(--color-fondo-body);
      border: none;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: var(--color-boton-hover);
    }

    .eventos-container {
      max-width: 900px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .evento-card {
      background: var(--color-fondo-menu);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 8px #d6a92c99;
      width: 320px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .evento-card h3 {
      margin: 0 0 10px 0;
      text-align: center;
      font-size: 20px;
      text-shadow: 1px 1px 3px #d6a92c;
    }

    .botones-evento {
      display: flex;
      justify-content: space-between;
    }

    .botones-evento button {
      width: 48%;
      background-color: var(--color-boton);
      color: var(--color-fondo-body);
    }

    .botones-evento button:hover {
      background-color: var(--color-boton-hover);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: var(--color-fondo-body);
      color: var(--color-boton);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 0 10px #d6a92c88;
    }

    th, td {
      padding: 10px 8px;
      text-align: center;
      border-bottom: 1px solid #d6a92c44;
    }

    th {
      background-color: #2c2f6d;
      font-weight: 700;
    }

    td:last-child button {
      background-color: var(--color-boton);
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      color: var(--color-fondo-body);
      transition: background-color 0.3s ease;
    }

    td:last-child button:hover {
      background-color: var(--color-boton-hover);
    }

    .votar-button {
      margin-top: 8px;
      background: #36a2eb;
      color: white;
      font-weight: 700;
    }

    .votar-button:hover {
      background: #2580c7;
    }

    .resultado-votos {
      font-weight: 700;
      font-size: 18px;
      margin-top: 10px;
      text-align: center;
      color: var(--color-boton);
      text-shadow: 0 0 5px #d6a92c;
    }
  </style>
</head>
<body>

  <!-- Botón para abrir/cerrar menú -->
  <button id="menu-toggle">☰ Menú</button>

  <!-- Menú plegable lateral -->
  <nav id="sidebar">
    <ul>
      <li>Inicio</li>
      <li>Eventos</li>
      <li>Resultados</li>
      <li>Contacto</li>
    </ul>
  </nav>

  <!-- Sumador de votos -->
  <section id="sumador-votos">
    <h3>Sumador de Votos</h3>
    <input type="number" min="0" class="input-voto" id="voto1" placeholder="Voto 1" />
    <input type="number" min="0" class="input-voto" id="voto2" placeholder="Voto 2" />
    <input type="number" min="0" class="input-voto" id="voto3" placeholder="Voto 3" />
    <input type="number" min="0" class="input-voto" id="voto4" placeholder="Voto 4" />
    <input type="number" class="input-voto" id="total-votos" placeholder="Total" readonly />
  </section>

  <!-- Su código original, sin cambiar nada -->
  <h1>Sistema de Votaciones</h1>

  <div class="form-container">
    <label for="nombreEvento">Nombre del Evento</label>
    <input type="text" id="nombreEvento" placeholder="Ejemplo: Elección de líder" />

    <label>Candidatos (escriba el nombre y presione Enter para agregar)</label>
    <div id="candidatosContainer"></div>
    <input type="text" id="inputCandidato" placeholder="Nombre del candidato" />

    <button id="btnAgregarEvento">Guardar Evento</button>
  </div>

  <section>
    <h2 style="text-align:center; color:#f7c948; margin-bottom:15px;">Eventos Activos</h2>
    <div class="eventos-container" id="eventosActivos"></div>
  </section>

  <section>
    <h2 style="text-align:center; color:#f7c948; margin: 20px 0 15px 0;">Resultados Finales</h2>
    <div class="eventos-container" id="resultadosFinales"></div>
  </section>

  <script>
    // Menú plegable
    const menuToggle = document.getElementById('menu-toggle');
    const sidebar = document.getElementById('sidebar');
    const body = document.body;

    menuToggle.addEventListener('click', () => {
      sidebar.classList.toggle('open');
      body.classList.toggle('menu-open');
    });

    // Sumador de votos
    const votosInputs = [
      document.getElementById('voto1'),
      document.getElementById('voto2'),
      document.getElementById('voto3'),
      document.getElementById('voto4')
    ];
    const totalVotosInput = document.getElementById('total-votos');
votosInputs.forEach(input => {
  input.addEventListener('input', actualizarTotalVotos);
});

function actualizarTotalVotos() {
  let total = 0;
  votosInputs.forEach(input => {
    const val = parseInt(input.value);
    if (!isNaN(val) && val >= 0) {
      total += val;
    }
  });
  totalVotosInput.value = total;
}

// Código original de votaciones (sin modificar)
// Variables y elementos
const nombreEventoInput = document.getElementById('nombreEvento');
const inputCandidato = document.getElementById('inputCandidato');
const candidatosContainer = document.getElementById('candidatosContainer');
const btnAgregarEvento = document.getElementById('btnAgregarEvento');
const eventosActivos = document.getElementById('eventosActivos');
const resultadosFinales = document.getElementById('resultadosFinales');

let eventos = [];

// Función para crear elemento candidato en formulario
function crearInputCandidato(nombre = '') {
  const div = document.createElement('div');
  div.classList.add('candidato-row');
  const input = document.createElement('input');
  input.type = 'text';
  input.value = nombre;
  input.placeholder = 'Nombre del candidato';
  input.required = true;

  const btnEliminar = document.createElement('button');
  btnEliminar.textContent = 'X';
  btnEliminar.type = 'button';
  btnEliminar.style.backgroundColor = '#f44336';
  btnEliminar.style.color = 'white';
  btnEliminar.style.border = 'none';
  btnEliminar.style.borderRadius = '6px';
  btnEliminar.style.cursor = 'pointer';
  btnEliminar.style.width = '30px';
  btnEliminar.style.fontWeight = 'bold';

  btnEliminar.addEventListener('click', () => {
    candidatosContainer.removeChild(div);
  });

  div.appendChild(input);
  div.appendChild(btnEliminar);

  return div;
}

// Agregar candidato con Enter
inputCandidato.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') {
    e.preventDefault();
    if (inputCandidato.value.trim() !== '') {
      const nuevoCandidato = crearInputCandidato(inputCandidato.value.trim());
      candidatosContainer.appendChild(nuevoCandidato);
      inputCandidato.value = '';
    }
  }
});

// Guardar evento
btnAgregarEvento.addEventListener('click', () => {
  const nombreEvento = nombreEventoInput.value.trim();
  if (!nombreEvento) {
    alert('Por favor, ingrese el nombre del evento.');
    return;
  }
  const candidatosInputs = candidatosContainer.querySelectorAll('input[type="text"]');
  const candidatos = [];
  for (let input of candidatosInputs) {
    if (input.value.trim() === '') {
      alert('Por favor, ingrese todos los nombres de los candidatos o elimine los campos vacíos.');
      return;
    }
    candidatos.push({ nombre: input.value.trim(), votos: 0 });
  }
  if (candidatos.length === 0) {
    alert('Debe agregar al menos un candidato.');
    return;
  }

  // Crear evento nuevo
  const nuevoEvento = {
    id: Date.now(),
    nombre: nombreEvento,
    candidatos,
    finalizado: false
  };

  eventos.push(nuevoEvento);

  // Reset formulario
  nombreEventoInput.value = '';
  candidatosContainer.innerHTML = '';

  actualizarEventosActivos();
  actualizarResultadosFinales();
});

// Actualizar eventos activos
function actualizarEventosActivos() {
  eventosActivos.innerHTML = '';
  eventos.filter(ev => !ev.finalizado).forEach(evento => {
    const card = document.createElement('div');
    card.classList.add('evento-card');

    const titulo = document.createElement('h3');
    titulo.textContent = evento.nombre;
    card.appendChild(titulo);

    evento.candidatos.forEach((candidato, index) => {
      const div = document.createElement('div');
      div.style.display = 'flex';
      div.style.justifyContent = 'space-between';
      div.style.alignItems = 'center';
      div.style.marginBottom = '8px';

      const nombre = document.createElement('span');
      nombre.textContent = candidato.nombre;

      const btnVotar = document.createElement('button');
      btnVotar.textContent = '+1 Voto';
      btnVotar.classList.add('votar-button');
      btnVotar.addEventListener('click', () => {
        evento.candidatos[index].votos++;
        actualizarEventosActivos();
        actualizarResultadosFinales();
      });

      div.appendChild(nombre);
      div.appendChild(btnVotar);
      card.appendChild(div);
    });

    // Botón para finalizar evento
    const btnFinalizar = document.createElement('button');
    btnFinalizar.textContent = 'Finalizar Evento';
    btnFinalizar.addEventListener('click', () => {
      evento.finalizado = true;
      actualizarEventosActivos();
      actualizarResultadosFinales();
    });
    card.appendChild(btnFinalizar);

    eventosActivos.appendChild(card);
  });
}

// Actualizar resultados finales
function actualizarResultadosFinales() {
  resultadosFinales.innerHTML = '';
  eventos.filter(ev => ev.finalizado).forEach(evento => {
    const card = document.createElement('div');
    card.classList.add('evento-card');

    const titulo = document.createElement('h3');
    titulo.textContent = evento.nombre;
    card.appendChild(titulo);

    const tabla = document.createElement('table');
    const thead = document.createElement('thead');
    const trHead = document.createElement('tr');
    const thCandidato = document.createElement('th');
    thCandidato.textContent = 'Candidato';
    const thVotos = document.createElement('th');
    thVotos.textContent = 'Votos';

    trHead.appendChild(thCandidato);
    trHead.appendChild(thVotos);
    thead.appendChild(trHead);
    tabla.appendChild(thead);

    const tbody = document.createElement('tbody');
    evento.candidatos.forEach(candidato => {
      const tr = document.createElement('tr');
      const tdNombre = document.createElement('td');
      tdNombre.textContent = candidato.nombre;
      const tdVotos = document.createElement('td');
      tdVotos.textContent = candidato.votos;

      tr.appendChild(tdNombre);
      tr.appendChild(tdVotos);
      tbody.appendChild(tr);
    });

    tabla.appendChild(tbody);
    card.appendChild(tabla);
    resultadosFinales.appendChild(card);
  });
}


