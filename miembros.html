<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Miembros - Adoración Viva</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAyfPQzO7evryWcQ5d1lGV3z8aB-gFOh_k",
      authDomain: "iglesia-adoracion-viva.firebaseapp.com",
      databaseURL: "https://iglesia-adoracion-viva-default-rtdb.firebaseio.com",
      projectId: "iglesia-adoracion-viva",
      storageBucket: "iglesia-adoracion-viva.firebasestorage.app",
      messagingSenderId: "815332010058",
      appId: "1:815332010058:web:d2afff616469349d88deb3",
      measurementId: "G-43MZP6V55D"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore(app);
  </script>
  <style>
    body {
      background-color: #1E3A8A; /* Azul oscuro */
    }

    .bg-dark-blue {
      background-color: #1E3A8A; /* Azul oscuro */
    }

    .bg-dark-blue-light {
      background-color: #3B82F6; /* Azul más claro para botones */
    }

    .bg-white-light {
      background-color: #F9FAFB; /* Blanco suave para las tablas */
    }

    .text-dark-blue {
      color: #1E3A8A; /* Azul oscuro para textos */
    }
  </style>
</head>

<body class="bg-gray-100">

  <!-- Sidebar and Header -->
  <div class="flex">
    <div class="w-64 bg-dark-blue p-6">
      <div class="flex justify-between items-center">
        <img class="w-16 h-16 rounded-full" src="https://azywyqozwwbfctxeokug.supabase.co/storage/v1/object/public/logos//images%20(1).png" alt="Logo">
        <button id="toggle-menu" class="text-white">☰</button>
      </div>
      <div id="menu" class="mt-6">
        <ul class="text-white">
          <li><a href="#" class="block py-2 px-4 hover:bg-blue-600">Miembros</a></li>
          <li><a href="#" class="block py-2 px-4 hover:bg-blue-600">Miembros de Baja</a></li>
        </ul>
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 p-8">
      <h2 class="text-3xl font-bold mb-6 text-dark-blue">Miembros</h2>

      <!-- Button to Add New Member -->
      <div class="flex justify-end mb-4">
        <button id="add-member-btn" class="bg-dark-blue-light text-white px-6 py-3 rounded hover:bg-blue-700">
          Agregar Nuevo Miembro
        </button>
      </div>

      <!-- Table for Active Members -->
      <div class="overflow-x-auto bg-white-light p-4 rounded-md shadow-lg">
        <table class="min-w-full bg-white border border-gray-300 shadow-md rounded-md">
          <thead class="bg-dark-blue text-white">
            <tr>
              <th class="px-4 py-2">Foto</th>
              <th class="px-4 py-2">Nombre Completo</th>
              <th class="px-4 py-2">Código</th>
              <th class="px-4 py-2">Edad</th>
              <th class="px-4 py-2">Dirección</th>
              <th class="px-4 py-2">Sociedad</th>
              <th class="px-4 py-2">Acciones</th>
            </tr>
            <tr class="bg-gray-100">
              <th><input type="text" placeholder="Buscar Foto" class="p-2 border border-gray-300 rounded w-full"></th>
              <th><input type="text" placeholder="Buscar Nombre" class="p-2 border border-gray-300 rounded w-full"></th>
              <th><input type="text" placeholder="Buscar Código" class="p-2 border border-gray-300 rounded w-full"></th>
              <th><input type="text" placeholder="Buscar Edad" class="p-2 border border-gray-300 rounded w-full"></th>
              <th><input type="text" placeholder="Buscar Dirección" class="p-2 border border-gray-300 rounded w-full"></th>
              <th><input type="text" placeholder="Buscar Sociedad" class="p-2 border border-gray-300 rounded w-full"></th>
              <th><input type="text" placeholder="Buscar Acción" class="p-2 border border-gray-300 rounded w-full"></th>
            </tr>
          </thead>
          <tbody id="members-table-body">
            <!-- Rows of members will be inserted here dynamically from Firestore -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Add/Edit Member Modal -->
  <div id="member-form-modal" class="fixed inset-0 bg-gray-800 bg-opacity-50 hidden justify-center items-center">
    <div class="bg-white p-6 rounded shadow-lg w-1/3">
      <h3 class="text-2xl font-bold mb-4" id="form-title">Agregar Miembro</h3>
      <form id="member-form" class="space-y-4">
        <!-- Personal Information Section -->
        <div>
          <label for="name" class="block font-medium">Nombre Completo</label>
          <input type="text" id="name" class="w-full p-2 border border-gray-300 rounded" required>
        </div>

        <div>
          <label for="birthday" class="block font-medium">Fecha de Cumpleaños</label>
          <input type="date" id="birthday" class="w-full p-2 border border-gray-300 rounded">
        </div>

        <div>
          <label for="civil-status" class="block font-medium">Estado Civil</label>
          <select id="civil-status" class="w-full p-2 border border-gray-300 rounded">
            <option value="soltero">Soltero</option>
            <option value="casado">Casado</option>
            <option value="divorciado">Divorciado</option>
          </select>
        </div>

        <!-- Family Section -->
        <div>
          <label for="family" class="block font-medium">Familia</label>
          <div id="family-container">
            <div class="flex items-center mb-2">
              <select class="p-2 border border-gray-300 rounded mr-2" name="family-member">
                <option value="madre">Mamá</option>
                <option value="padre">Papá</option>
                <option value="hermanos">Hermanos</option>
                <option value="abuelos">Abuelos</option>
              </select>
              <input type="text" name="family-name" class="p-2 border border-gray-300 rounded" placeholder="Nombre">
            </div>
          </div>
          <button type="button" id="add-family-btn" class="bg-dark-blue-light text-white px-4 py-2 rounded hover:bg-blue-700">
            Añadir Familiar
          </button>
        </div>

        <!-- Spiritual Section -->
        <div>
          <label for="conversion-date" class="block font-medium">Conversión (Fecha)</label>
          <input type="date" id="conversion-date" class="w-full p-2 border border-gray-300 rounded">
        </div>

        <div>
          <label for="conversion-location" class="block font-medium">Conversión (Lugar)</label>
          <input type="text" id="conversion-location" class="w-full p-2 border border-gray-300 rounded">
        </div>

        <div>
          <label for="baptism-date" class="block font-medium">Bautizo del Espíritu (Fecha)</label>
          <input type="date" id="baptism-date" class="w-full p-2 border border-gray-300 rounded">
        </div>

        <div>
          <label for="baptism-location" class="block font-medium">Bautizo del Espíritu (Ubicación)</label>
          <input type="text" id="baptism-location" class="w-full p-2 border border-gray-300 rounded">
        </div>

        <div class="flex justify-end space-x-4">
          <button type="button" id="close-modal-btn" class="bg-gray-500 text-white px-4 py-2 rounded">Cancelar</button>
          <button type="submit" id="save-member-btn" class="bg-dark-blue-light text-white px-6 py-3 rounded hover:bg-blue-700">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Open Add Member Form
    document.getElementById('add-member-btn').addEventListener('click', () => {
      document.getElementById('member-form-modal').classList.remove('hidden');
    });

    // Close Add Member Form
    document.getElementById('close-modal-btn').addEventListener('click', () => {
      document.getElementById('member-form-modal').classList.add('hidden');
    });

    // Add Family Member
    document.getElementById('add-family-btn').addEventListener('click', () => {
      const familyContainer = document.getElementById('family-container');
      const newFamilyMember = document.createElement('div');
      newFamilyMember.classList.add('flex', 'items-center', 'mb-2');
      newFamilyMember.innerHTML = `
        <select class="p-2 border border-gray-300 rounded mr-2" name="family-member">
          <option value="madre">Mamá</option>
          <option value="padre">Papá</option>
          <option value="hermanos">Hermanos</option>
          <option value="abuelos">Abuelos</option>
        </select>
        <input type="text" name="family-name" class="p-2 border border-gray-300 rounded" placeholder="Nombre">
      `;
      familyContainer.appendChild(newFamilyMember);
    });

    // Save Member to Firestore
    document.getElementById('member-form').addEventListener('submit', (event) => {
      event.preventDefault();

      const name = document.getElementById('name').value;
      const birthday = document.getElementById('birthday').value;
      const civilStatus = document.getElementById('civil-status').value;
      const familyMembers = [];
     
const familyNames = document.querySelectorAll('input[name="family-name"]');
familyNames.forEach(name => {
familyMembers.push(name.value);
});

javascript
Copiar
Editar
  const conversionDate = document.getElementById('conversion-date').value;
  const conversionLocation = document.getElementById('conversion-location').value;
  const baptismDate = document.getElementById('baptism-date').value;
  const baptismLocation = document.getElementById('baptism-location').value;

  // Save to Firestore
  db.collection('members').add({
    name,
    birthday,
    civilStatus,
    familyMembers,
    conversionDate,
    conversionLocation,
    baptismDate,
    baptismLocation
  })
  .then(() => {
    alert('Miembro agregado con éxito');
    document.getElementById('member-form-modal').classList.add('hidden');
  })
  .catch((error) => {
    console.error("Error adding document: ", error);
  });
});
</script> 
</body>
</html> 
