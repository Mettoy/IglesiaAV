<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gestión de Miembros</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 0;
  }
  header nav ul {
    display: flex;
    gap: 2rem;
    padding: 1rem 2rem;
    background-color: #3b83bd;
    margin: 0;
    list-style: none;
  }
  header nav ul li a {
    color: white;
    text-decoration: none;
    font-weight: 600;
  }
  header nav ul li a:hover {
    text-decoration: underline;
  }

  main {
    max-width: 960px;
    margin: 2rem auto;
    padding: 0 1rem;
  }

  /* Barra búsqueda + botón */
  .search-add-container {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }
  #busqueda-miembros {
    flex-grow: 1;
    padding: 0.5rem;
    border-radius: 4px;
    border: 1px solid #ccc;
  }
  #btn-agregar-miembro {
    padding: 0.5rem 1rem;
    background-color: #3b83bd;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  #btn-agregar-miembro:hover {
    background-color: #2e65a2;
  }

  /* Pestañas */
  .tabs {
    margin-bottom: 1rem;
  }
  .tabs button {
    padding: 0.5rem 1rem;
    border: none;
    border-bottom: 2px solid transparent;
    background: transparent;
    color: #555;
    cursor: pointer;
    font-weight: 600;
    transition: color 0.3s ease, border-bottom-color 0.3s ease;
  }
  .tabs button.active {
    border-bottom-color: #3b83bd;
    color: #3b83bd;
  }
  .tabs button:hover {
    color: #3b83bd;
  }

  /* Tabla */
  table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 8px;
    overflow: hidden;
  }
  th, td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #ddd;
    text-align: left;
  }
  th {
    background-color: #3b83bd;
    color: white;
  }
  tr:hover {
    background-color: #f1f9ff;
  }

  /* Botón reactivar */
  .btn-reactivar {
    padding: 0.25rem 0.5rem;
    background-color: #4caf50;
    color: white;
    border: none;
    border-radius: 3px;
    cursor: pointer;
  }
  .btn-reactivar:hover {
    background-color: #3a8d3a;
  }

  /* Paginación */
  .paginacion {
    margin-top: 1rem;
    display: flex;
    justify-content: center;
    gap: 0.5rem;
  }
  .paginacion button {
    padding: 0.4rem 0.8rem;
    border: 1px solid #ccc;
    background: white;
    cursor: pointer;
    border-radius: 3px;
  }
  .paginacion button.active {
    background-color: #3b83bd;
    color: white;
    border-color: #3b83bd;
  }
  .paginacion button:hover:not(.active) {
    background-color: #e6f0fa;
  }
</style>
</head>
<body>

<header>
  <nav>
    <ul>
      <li><a href="inicio.html">Inicio</a></li>
      <li><a href="diezmo.html">Diezmo</a></li>
    </ul>
  </nav>
</header>

<main>
  <div class="search-add-container">
    <input type="text" id="busqueda-miembros" placeholder="Buscar por nombre o código" />
    <button id="btn-agregar-miembro">Añadir Miembro</button>
  </div>

  <div class="tabs">
    <button id="btn-activos" class="active">Miembros Activos</button>
    <button id="btn-baja">Miembros de Baja</button>
  </div>

  <table id="tabla-miembros">
    <thead>
      <tr>
        <th>Foto</th>
        <th>Código</th>
        <th>Nombre</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <!-- Aquí se cargan los miembros -->
    </tbody>
  </table>

  <div class="paginacion" id="paginacion">
    <!-- Botones de paginación -->
  </div>
</main>

<script>
  // Datos simulados para ejemplo
  const miembros = [
    { id: 1, codigo: 'A001', nombre: 'Ana Pérez', estado: 'activo', foto: 'https://via.placeholder.com/40' },
    { id: 2, codigo: 'B002', nombre: 'Luis Gómez', estado: 'activo', foto: 'https://via.placeholder.com/40' },
    { id: 3, codigo: 'C003', nombre: 'María López', estado: 'baja', foto: 'https://via.placeholder.com/40' },
    { id: 4, codigo: 'D004', nombre: 'Carlos Díaz', estado: 'activo', foto: 'https://via.placeholder.com/40' },
    { id: 5, codigo: 'E005', nombre: 'Sofía Martínez', estado: 'baja', foto: 'https://via.placeholder.com/40' },
    // Puedes agregar más miembros para pruebas
  ];

  const miembrosPorPagina = 20;
  let paginaActual = 1;
  let estadoFiltro = 'activo'; // activo o baja
  let textoBusqueda = '';

  const tbody = document.querySelector('#tabla-miembros tbody');
  const paginacionDiv = document.getElementById('paginacion');
  const inputBusqueda = document.getElementById('busqueda-miembros');
  const btnActivos = document.getElementById('btn-activos');
  const btnBaja = document.getElementById('btn-baja');

  function filtrarYMostrar() {
    // Filtrar por estado
    let filtrados = miembros.filter(m => m.estado === estadoFiltro);

    // Filtrar por texto de búsqueda en nombre o código
    if (textoBusqueda.trim() !== '') {
      const txt = textoBusqueda.toLowerCase();
      filtrados = filtrados.filter(m =>
        m.nombre.toLowerCase().includes(txt) || m.codigo.toLowerCase().includes(txt)
      );
    }

    // Ordenar alfabéticamente por código
    filtrados.sort((a, b) => a.codigo.localeCompare(b.codigo));

    // Paginación
    const totalPaginas = Math.ceil(filtrados.length / miembrosPorPagina);
    if (paginaActual > totalPaginas) paginaActual = totalPaginas || 1;

    const inicio = (paginaActual - 1) * miembrosPorPagina;
    const fin = inicio + miembrosPorPagina;
    const paginaMiembros = filtrados.slice(inicio, fin);

    // Renderizar tabla
    tbody.innerHTML = '';
    paginaMiembros.forEach(m => {
      const tr = document.createElement('tr');

      const tdFoto = document.createElement('td');
      const img = document.createElement('img');
      img.src = m.foto;
      img.alt = m.nombre;
      img.style.width = '40px';
      img.style.height = '40px';
      img.style.borderRadius = '50%';
      tdFoto.appendChild(img);

      const tdCodigo = document.createElement('td');
      tdCodigo.textContent = m.codigo;

      const tdNombre = document.createElement('td');
      tdNombre.textContent = m.nombre;

      const tdEstado = document.createElement('td');
      tdEstado.textContent = m.estado === 'activo' ? 'Activo' : 'De Baja';

      const tdAcciones = document.createElement('td');
      if (m.estado === 'baja') {
        const btnReactivar = document.createElement('button');
        btnReactivar.textContent = 'Reactivar';
        btnReactivar.classList.add('btn-reactivar');
        btnReactivar.onclick = () => {
          reactivarMiembro(m.id);
        };
        tdAcciones.appendChild(btnReactivar);
      } else {
        tdAcciones.textContent = '-';
      }

      tr.appendChild(tdFoto);
      tr.appendChild(tdCodigo);
      tr.appendChild(tdNombre);
      tr.appendChild(tdEstado);
      tr.appendChild(tdAcciones);

      tbody.appendChild(tr);
    });

    // Renderizar paginación
    renderizarPaginacion(totalPaginas);
  }

  function renderizarPaginacion(totalPaginas) {
    paginacionDiv.innerHTML = '';
    for (let i = 1; i <= totalPaginas; i++) {
      const btn = document.createElement('button');
      btn.textContent = i;
      if (i === paginaActual) {
        btn.classList.add('active');
      }
      btn.onclick = () => {
        paginaActual = i;
        filtrarYMostrar();
      };
      paginacionDiv.appendChild(btn);
    }
  }

  function reactivarMiembro(id) {
    const miembro = miembros.find(m => m.id === id);
    if (miembro) {
      miembro.estado = 'activo';
      alert(`Miembro ${miembro.nombre} reactivado.`);
      filtrarYMostrar();
    }
  }

  // Eventos pestañas
  btnActivos.onclick = () => {
    estadoFiltro = 'activo';
    paginaActual = 1;
    btnActivos.classList.add('active');
    btnBaja.classList.remove('active');
    filtrarYMostrar();
  };
  btnBaja.onclick = () => {
    estadoFiltro = 'baja';
    paginaActual = 1;
    btnBaja.classList.add('active');
    btnActivos.classList.remove('active');
    filtrarYMostrar();
  };

  // Evento búsqueda
  inputBusqueda.addEventListener('input', () => {
    textoBusqueda = inputBusqueda.value;
    paginaActual = 1;
    filtrarYMostrar();
  });

  // Botón agregar miembro
  document.getElementById('btn-agregar-miembro').onclick = () => {
    alert('Aquí abrirías el formulario para añadir un nuevo miembro');
  };

  // Carga inicial
  filtrarYMostrar();
</script>

</body>
</html>
