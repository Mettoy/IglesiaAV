<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gestión de Miembros</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121a2f;
      color: white;
      margin: 20px;
    }
    h2 {
      color: #e6b800;
    }
    .search-bar {
      margin-bottom: 10px;
    }
    .search-bar input {
      padding: 5px;
      width: 300px;
      border-radius: 4px;
      border: none;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 10px;
    }
    th, td {
      padding: 10px;
      border: 1px solid #444;
      text-align: left;
    }
    th {
      background-color: #1a2639;
      color: #e6b800;
    }
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }
    .pagination button {
      padding: 6px 12px;
      background-color: #e6b800;
      color: #121a2f;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    .pagination input {
      width: 50px;
      text-align: center;
      padding: 4px;
      border-radius: 4px;
      border: none;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.4);
    }
    .modal-content {
      background-color: #1a2639;
      margin: 10% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 400px;
      border-radius: 5px;
    }
    .modal-content h3 {
      color: #e6b800;
    }
    .modal-content input {
      width: 100%;
      padding: 8px;
      margin: 5px 0 10px 0;
      border: none;
      border-radius: 4px;
    }
    .modal-content button {
      padding: 8px 16px;
      background-color: #e6b800;
      color: #121a2f;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h2>Gestión de Miembros</h2>

  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Buscar por código o nombre...">
    <button onclick="abrirModal()">Añadir Miembro</button>
  </div>

  <table id="tablaMiembros">
    <thead>
      <tr>
        <th>Código</th>
        <th>Nombre</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="pagination">
    <button onclick="cambiarPagina(-1)">Anterior</button>
    <span>
      Página <input type="number" id="paginaActual" min="1" value="1" onchange="irAPagina()"> de
      <span id="totalPaginas">1</span>
    </span>
    <button onclick="cambiarPagina(1)">Siguiente</button>
  </div>

  <!-- Modal -->
  <div id="miModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="cerrarModal()">&times;</span>
      <h3 id="modalTitulo">Añadir Miembro</h3>
      <input type="hidden" id="miembroId">
      <label for="codigo">Código:</label>
      <input type="text" id="codigo" placeholder="Ingrese el código">
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" placeholder="Ingrese el nombre">
      <button onclick="guardarMiembro()">Guardar</button>
    </div>
  </div>

  <script>
    let miembros = [];
    let pagina = 1;
    const porPagina = 20;
    let totalPaginas = 1;

    // Datos de prueba
    for (let i = 1; i <= 103; i++) {
      miembros.push({ id: i, codigo: `C${String(i).padStart(3, '0')}`, nombre: `Miembro ${i}` });
    }

    // Orden alfabético por código
    miembros.sort((a, b) => a.codigo.localeCompare(b.codigo));

    function renderizarTabla() {
      const inicio = (pagina - 1) * porPagina;
      const fin = inicio + porPagina;
      const cuerpo = document.querySelector("#tablaMiembros tbody");
      cuerpo.innerHTML = "";
      const filtro = document.getElementById("searchInput").value.toLowerCase();
      const miembrosFiltrados = miembros.filter(m => m.codigo.toLowerCase().includes(filtro) || m.nombre.toLowerCase().includes(filtro));
      totalPaginas = Math.ceil(miembrosFiltrados.length / porPagina);
      document.getElementById("totalPaginas").textContent = totalPaginas;
      const miembrosPagina = miembrosFiltrados.slice(inicio, fin);
      miembrosPagina.forEach(m => {
        const fila = `<tr>
                        <td>${m.codigo}</td>
                        <td>${m.nombre}</td>
                        <td><button onclick="editarMiembro(${m.id})">Editar</button></td>
                      </tr>`;
        cuerpo.innerHTML += fila;
      });
      document.getElementById("paginaActual").value = pagina;
    }

    function cambiarPagina(direccion) {
      pagina += direccion;
      if (pagina < 1) pagina = 1;
      if (pagina > totalPaginas) pagina = totalPaginas;
      renderizarTabla();
    }

    function irAPagina() {
      const num = parseInt(document.getElementById("paginaActual").value);
      if (!isNaN(num) && num >= 1 && num <= totalPaginas) {
        pagina = num;
        renderizarTabla();
      }
    }

    function abrirModal() {
      document.getElementById("miembroId").value = "";
      document.getElementById("codigo").value = "";
      document.getElementById("nombre").value = "";
      document.getElementById("modalTitulo").textContent = "Añadir Miembro";
      document.getElementById("miModal").style.display = "block";
    }

    function cerrarModal() {
      document.getElementById("miModal").style.display = "none";
    }

    function guardarMiembro() {
      const id = document.getElementById("miembroId").value;
      const codigo = document.getElementById("codigo").value.trim();
      const nombre = document.getElementById("nombre").value.trim();
      if (codigo === "" || nombre === "") {
        alert("Por favor, complete todos los campos.");
        return;
      }
      if (id) {
        // Editar
        const index = miembros.findIndex(m => m.id == id);
        if (index !== -1) {
          miembros[index].codigo = codigo;
          miembros[index].nombre = nombre;
        }
      } else {
        // Añadir
        const nuevoId = miembros.length ? Math.max(...miembros.map(m => m.id)) + 1 : 1;
        miembros.push({ id: nuevoId, codigo, nombre });
        miembros.sort((a, b) => a.codigo.localeCompare(b.codigo));
      }
      cerrarModal();
      renderizarTabla();
    }

    function editarMiembro(id) {
      const miembro = miembros.find(m => m.id === id);
      if (miembro) {
        document.getElementById("miembroId").value = miembro.id;
        document.getElementById("codigo").value = miembro.codigo;
        document.getElementById("nombre").value = miembro.nombre;
        document.getElementById("modalTitulo").textContent = "Editar Miembro";
        document.getElementById("miModal").style.display = "block";
      }
    }

    document.getElementById("searchInput").addEventListener("input", () => {
      pagina = 1;
      renderizarTabla();
    });

    // Inicial
    renderizarTabla();
  </script>

</body>
</html>
