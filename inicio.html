<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gráfico de Miembros por Sociedad</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background-color: #0b0c2a;
      color: #f7c948;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }

    canvas {
      max-width: 400px;
      margin: auto;
    }
  </style>
</head>
<body>
  <h2>Distribución de Miembros por Sociedad</h2>
  <canvas id="sociedadChart"></canvas>

  <script>
    // Simulación: si no hay datos en localStorage, agregamos algunos por defecto
    if (!localStorage.getItem('miembros')) {
      const miembrosEjemplo = [
        { nombre: "Ana", sociedad: "Damas" },
        { nombre: "Luis", sociedad: "Caballeros" },
        { nombre: "Carlos", sociedad: "Jóvenes" },
        { nombre: "Marta", sociedad: "Damas" },
        { nombre: "Pedro", sociedad: "Caballeros" },
        { nombre: "Lucía", sociedad: "Jóvenes" },
        { nombre: "José", sociedad: "Sociedad" }
      ];
      localStorage.setItem('miembros', JSON.stringify(miembrosEjemplo));
    }

    // Obtener miembros desde localStorage
    const miembros = JSON.parse(localStorage.getItem('miembros')) || [];

    // Contar miembros por sociedad
    const conteo = {
      Sociedad: 0,
      Jóvenes: 0,
      Damas: 0,
      Caballeros: 0
    };

    miembros.forEach(m => {
      if (conteo[m.sociedad] !== undefined) {
        conteo[m.sociedad]++;
      }
    });

    // Crear gráfico
    const ctx = document.getElementById('sociedadChart').getContext('2d');
    const sociedadChart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Sociedad', 'Jóvenes', 'Damas', 'Caballeros'],
        datasets: [{
          label: 'Cantidad de Miembros',
          data: [
            conteo['Sociedad'],
            conteo['Jóvenes'],
            conteo['Damas'],
            conteo['Caballeros']
          ],
          backgroundColor: ['#f7c948', '#36a2eb', '#ff6384', '#9966ff'],
          borderColor: '#14153a',
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            labels: {
              color: '#f7c948'
            }
          }
        }
      }
    });
  </script>
</body>
</html>